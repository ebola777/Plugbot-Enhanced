define("plugbot/controllers/module",["angular"],function(t){return t.module("app.controllers",[])}),define("plugbot/controllers/WindowCtrl",["plugbot/controllers/module","angular"],function(){}),define("plugbot/controllers/index",["plugbot/controllers/WindowCtrl"],function(){return null}),define("plugbot/directives/module",["angular"],function(t){return t.module("app.directives",[])}),define("plugbot/directives/draggable",["plugbot/directives/module","angular"],function(t,e){t.directive("draggable",["$document","$window","DomGeometry",function(t,n,o){return{restrict:"A",scope:{dragGrid:"&"},link:function(i,r,a){function l(){var t=h.iframe,e=t.css("pointer-events");t.css("pointer-events","none"),x.originalPointerEvents=e}function u(){var t=h.iframe;t.css("pointer-events",x.originalPointerEvents)}function d(t){r.css("z-index",t)}function c(t,e){var n,i,a,l=h.containment,u={x:t,y:e};return h.grid&&(u.x-=u.x%h.grid[0],u.y-=u.y%h.grid[1]),_.each(h.snap,function(t){var e=o.getSnap(t,{left:u.x,top:u.y,right:u.x+r.outerWidth(),bottom:u.y+r.outerHeight()},h.snapMode,h.snapTolerance);(e.x||e.y)&&(u.x+=e.x,u.y+=e.y)}),l.length&&(n={left:t,top:e,right:t+r.outerWidth(),bottom:e+r.outerHeight()},i=o.isContain(l,n),i.x&&i.y||(a=o.getRestraint(l,n),i.x||(u.x=a.left),i.y||(u.y=a.top))),u}function s(t){t=c(t.x,t.y),r.css({left:t.x,top:t.y})}function p(){i.$apply(function(){var t=x.window,e=x.currentMouseOffset,n={x:t.scrollLeft()-b.x,y:t.scrollTop()-b.y},o={x:m.x+e.x+n.x,y:m.y+e.y+n.y};x.currentScrollOffset=n,s(o)})}function g(t){var e=x.currentScrollOffset,n={x:t.clientX-v.x,y:t.clientY-v.y},o={x:m.x+n.x+e.x,y:m.y+n.y+e.y};return x.currentMouseOffset=n,s(o),!1}function f(){d(x.originalZIndex),u(),x.window.unbind("scroll",p),t.unbind("mousemove",g),t.unbind("mouseup",f)}var m,v,b,h,x={},y=e.element(a.dragHandle);r.css({position:"absolute"}),y.bind("mousedown",function(o){var u=e.element(n);return m={x:r.prop("offsetLeft"),y:r.prop("offsetTop")},v={x:o.clientX,y:o.clientY},b={x:u.scrollLeft(),y:u.scrollTop()},h={zIndex:a.dragZIndex,containment:e.element(a.dragContainment),containmentTolerance:a.dragContainmentTolerance,iframe:e.element(a.dragIframeFix),snap:e.element(a.dragSnap),snapMode:a.dragSnapMode,snapTolerance:a.dragSnapTolerance||8,grid:i.dragGrid()},x={window:u,currentMouseOffset:{x:0,y:0},currentScrollOffset:{x:0,y:0},originalZIndex:r.css("z-index"),originalPointerEvents:void 0},d(h.zIndex),l(),u.bind("scroll",p),t.bind("mousemove",g),t.bind("mouseup",f),!1})}}}])}),define("plugbot/directives/window",["plugbot/directives/module"],function(t){t.directive("window",["$templateCache",function(t){return{restrict:"A",template:t.get("window.tpl.html"),transclude:!0}}])}),define("plugbot/directives/index",["plugbot/directives/draggable","plugbot/directives/window"],function(){return null}),define("plugbot/services/module",["angular"],function(t){return t.module("app.services",[])}),define("plugbot/services/DomInjection",["plugbot/services/module","angular"],function(t,e){t.factory("DomInjection",["$templateCache",function(t){return{init:function(){var n=e.element("#app");n.append(t.get("main.tpl.html"))}}}])}),define("plugbot/services/utils/DomGeometry",["plugbot/services/module","angular"],function(t,e){t.factory("DomGeometry",["$window",function(t){return{isContainRect:function(t,e){var n={x:!1,y:!1};return t.left-e.left<=0&&e.right-t.right<=0&&(n.x=!0),t.top-e.top<=0&&e.bottom-t.bottom<=0&&(n.y=!0),n},isContain:function(t,e){var n=this.getBoundingRect(t),o=this.getBoundingRect(e);return this.isContainRect(n,o)},getSnap:function(t,e,n,o){var i,r,a=this.getBoundingRect(t),l=this.getBoundingRect(e),u=["left","right"],d=["top","bottom"],c=[],s={x:0,y:0};for(("inner"===n||"both"===n)&&c.push([0,0],[1,1]),("outer"===n||"both"===n)&&c.push([0,1],[1,0]),i=0;i<c.length;i+=1)r=a[u[c[i][0]]]-l[u[c[i][1]]],Math.abs(r)<=o&&a.top<=l.bottom&&l.top<=a.bottom&&(s.x+=r),r=a[d[c[i][0]]]-l[d[c[i][1]]],Math.abs(r)<=o&&a.left<=l.right&&l.left<=a.right&&(s.y+=r);return s},getRestraint:function(t,e){var n=this.getBoundingRect(t),o=this.getBoundingRect(e),i=this.isContainRect(n,o),r=o;return i.x||(n.left>o.left?(r.left=n.left,r.right=n.left+o.width):(r.right=n.right,r.left=n.right-o.width)),i.y||(n.top>o.top?(r.top=n.top,r.bottom=n.top+o.height):(r.bottom=n.bottom,r.top=n.bottom-o.height)),r},offsetRect:function(t,e){e=_.clone(e),_.defaults(e,{x:0,y:0}),t.left+=e.x,t.right+=e.x,t.top+=e.y,t.bottom+=e.y},getBoundingRect:function(n){var o,i=e.element(t),r=["left","right","top","bottom","width","height"],a={x:i.scrollLeft(),y:i.scrollTop()};return n instanceof e.element?(o=_.pick(n[0].getBoundingClientRect(),r),this.offsetRect(o,a)):n instanceof HTMLElement?(o=_.pick(n.getBoundingClientRect(),r),this.offsetRect(o,a)):o=n,o}}}])}),define("plugbot/services/index",["plugbot/services/DomInjection","plugbot/services/utils/DomGeometry"],function(){return null}),angular.module("app.views",["main.tpl.html","window.tpl.html"]),angular.module("main.tpl.html",[]).run(["$templateCache",function(t){t.put("main.tpl.html",'<div data-window>\n    <div class="item woot">Auto Woot</div>\n    <div class="item join">Auto Join</div>\n</div>\n')}]),angular.module("window.tpl.html",[]).run(["$templateCache",function(t){t.put("window.tpl.html",'<div class="plugbot-window"\n     data-draggable\n     data-drag-z-index="1000000"\n     data-drag-containment="#app"\n     data-drag-iframe-fix="#yt-frame"\n     data-drag-handle=".handle"\n     data-drag-grid="[4, 4]"\n     data-drag-snap=".app-header, #audience, #dj-booth, #playback-container, #dj-button, #vote, .app-right, #footer"\n     data-drag-snap-mode="outer"\n     data-drag-snap-tolerance="8">\n    <div class="handle">\n        Plugbot Enhanced\n    </div>\n    <div class="body" data-ng-transclude>\n    </div>\n</div>\n')}]),define("plugbot/views/index",function(){}),define("plugbot/app",["angular","plugbot/controllers/index","plugbot/directives/index","plugbot/services/index","plugbot/views/index"],function(t){var e=t.module("app",["app.controllers","app.directives","app.services","app.views"]);return e.run(["DomInjection",function(t){t.init()}]),e}),require(["angular"],function(t){require(["ngStorage","domReady!","plugbot/app"],function(){t.bootstrap(t.element("#app"),["app"])})}),define("main",function(){});