/* @license
 * Copyright (C) 2013  Shawn
 * This program is licensed under the MIT license.
 */
!function(){"use strict";var e;return e=document.getElementById("plugbot-js"),null!==e&&e.parentElement.removeChild(e),void 0!==window.Plugbot?(void 0!==Plugbot.reload&&Plugbot.reload(),void 0):(window.Plugbot={},Plugbot.simpleRemove=function(){void 0!==window.requirejs&&(requirejs.undef("Plugbot/Entry"),requirejs.undef("Plugbot/Loader")),delete window.Plugbot},Plugbot.initDone=function(){delete Plugbot.simpleRemove},void 0!==window.API&&requirejs.specified("room")?(require(["Plugbot/Loader"],function(e){e.initialize()}),void 0):(Plugbot.simpleRemove(),void 0))}(),define("Plugbot/Entry",[],function(){"use strict";var e=function(){return{environment:"RELEASE",baseUrl:"ebola777.github.io/files/Plugbot-Enhanced/",scriptDir:"js/",cssDir:"css/",scripts:["Plugbot/base/Events","Plugbot/base/SubView","Plugbot/base/Template","Plugbot/base/Timer","Plugbot/colls/Taskbar/ItemCollection","Plugbot/colls/Userlist/ItemCollection","Plugbot/events/FloatedWindow/Events","Plugbot/events/site/Events","Plugbot/events/site/RoomSize","Plugbot/events/Taskbar/ItemEvents","Plugbot/main/Dispose","Plugbot/main/Init","Plugbot/main/Settings","Plugbot/main/WindowManager","Plugbot/models/FloatedWindow/Model","Plugbot/models/MainUi/Model","Plugbot/models/Taskbar/ItemModel","Plugbot/models/Taskbar/Model","Plugbot/models/Userlist/HeadModel","Plugbot/models/Userlist/Model","Plugbot/models/Userlist/UsersModel","Plugbot/store/LocalStorage","Plugbot/store/LZString","Plugbot/tmpls/FloatedWindow/View","Plugbot/tmpls/MainUi/View","Plugbot/tmpls/Taskbar/ItemView","Plugbot/tmpls/Taskbar/View","Plugbot/tmpls/Userlist/HeadView","Plugbot/tmpls/Userlist/UsersItemView","Plugbot/tmpls/Userlist/View","Plugbot/utils/API","Plugbot/utils/APIBuffer","Plugbot/utils/Countdown","Plugbot/utils/Helpers","Plugbot/utils/Ticker","Plugbot/utils/Watcher","Plugbot/views/FloatedWindow/View","Plugbot/views/layout/TableLayout","Plugbot/views/MainUi/View","Plugbot/views/Taskbar/View","Plugbot/views/Taskbar/ItemView","Plugbot/views/Userlist/HeadView","Plugbot/views/Userlist/UsersItemView","Plugbot/views/Userlist/UsersView","Plugbot/views/Userlist/View","Plugbot/views/utils/Ui","Plugbot/views/utils/UiHelpers"],scriptDep:["Plugbot/main/Settings","Plugbot/main/Init","Plugbot/main/Dispose"],refScriptsUrl:["ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js"],cssUrl:["style.min.css"],refCssUrl:["ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/smoothness/jquery-ui.min.css"],cssClassname:"css-plugbot-enhanced",getRefScriptUrl:function(e){return"http://"+e},getCssUrl:function(e){return"http://"+this.baseUrl+this.cssDir+e},getRefCssUrl:function(e){return"http://"+e}}}();return e}),define("Plugbot/Loader",["Plugbot/Entry"],function(e){"use strict";var t=function(){return{timeoutLoading:5e3,intervalRetry:1e3,maxNumRetry:2,fnNameLoadDep:"initialize",numFiles:void 0,numLoadedFiles:void 0,loadedFiles:void 0,aborted:void 0,initialize:function(){var t,i=0,s=[],n=[];for(this.numFiles=0,this.numLoadedFiles=0,this.loadedFiles={},this.aborted=!1,t=0;t!==e.refScriptsUrl.length;t+=1)s.push(e.getRefScriptUrl(e.refScriptsUrl[t])),i+=1;for(t=0;t!==e.cssUrl.length;t+=1)n.push(e.getCssUrl(e.cssUrl[t])),i+=1;for(t=0;t!==e.refCssUrl.length;t+=1)n.push(e.getRefCssUrl(e.refCssUrl[t])),i+=1;if(0===i)return this.loadDep(),void 0;for(this.numFiles=i,t=0;t!==n.length;t+=1)this.loadCss(n[t]);for(t=0;t!==s.length;t+=1)this.loadScript(s[t],0)},loadDep:function(){var t,i,s,n=this,o=e.scriptDep;require(o,function(){for(t=0;t!==o.length;t+=1)i=require(o[t]),void 0!==i&&(s=i[n.fnNameLoadDep],void 0!==s&&s())})},fileDone:function(e){this.isFileLoaded(e)||(this.loadedFiles[e]=!0,this.numLoadedFiles+=1,this.numLoadedFiles===this.numFiles&&this.loadDep())},fileFail:function(e,t){this.aborted||(this.aborted=!0,_.defaults(t,{textError:"Unknown"}),alert("Failed to load Plugbot file, stopping now.\n\nFile: "+e+"\nError: "+t.textError),Plugbot.simpleRemove())},loadScript:function(e,t){var i=this;this.aborted||this.getScript(e,{timeout:this.timeoutLoading},function(){i.aborted||i.fileDone(e)},function(s){return i.aborted?void 0:(t=t||0,t+=1,t===i.maxNumRetry?(i.fileFail(e,{textError:s.status}),void 0):(setTimeout(function(){i.aborted||i.isFileLoaded(e)||i.loadScript(e,t)},i.intervalRetry),void 0))})},loadCss:function(t,i){var s=this;this.aborted||this.getCss(t,{timeout:this.timeoutLoading,classname:e.cssClassname},function(){s.aborted||s.fileDone(t)},function(){return s.aborted?void 0:(i=i||0,i+=1,i===s.maxNumRetry?(s.fileFail(t,{textError:"Timeout"}),void 0):(setTimeout(function(){s.aborted||s.isFileLoaded(t)||s.loadCss(t,i)},s.intervalRetry),void 0))})},getScript:function(e,t,i,s){$.ajax({url:e,dataType:"script",crossDomain:!0,timeout:t.timeout,cache:!1}).done(i).fail(s)},getCss:function(e,t,i,s){var n,o;n=$(document.createElement("link")).prop({"class":t.classname,rel:"stylesheet",type:"text/css",href:e}),o=setTimeout(s,t.timeout),n[0].onload=function(){clearTimeout(o),i()},$(document.head).append(n)},isFileLoaded:function(e){return void 0!==this.loadedFiles[e]}}}();return t}),define("Plugbot/base/Events",[],function(){"use strict";var e={dispatch:function(e,t){var i=this[e];if(void 0===i)throw new Error('Cannot find event "'+e+'".');return this.trigger(this[e],t),this}};return function(){_.extend(e,Backbone.Events)}(),e}),define("Plugbot/base/SubView",[],function(){"use strict";var e=Backbone.View.extend({initialize:function(){this._objSubViews={}},renderSub:function(e,t){var i,s;if(null===e||void 0===e){s=this._objSubViews;for(i in s)s.hasOwnProperty(i)&&s[i].renderFromParent(t)}else this._objSubViews[e].renderFromParent(t);return this},subViews:function(e,t){var i;return void 0===e?i=this._getSubViews():(this._setSubViews(e,t),i=this),i},setSubView:function(e,t){this._objSubViews[e]=t},getSubView:function(e){return this._objSubViews[e]},closeSubView:function(e){this._objSubViews[e].close(),delete this._objSubViews[e]},closeAllSubViews:function(){var e,t=this._objSubViews;for(e in t)t.hasOwnProperty(e)&&t[e].close();this._objSubViews={}},_getSubViews:function(){return this._objSubViews},_setSubViews:function(e,t){var i,s;this._objSubViews=e;for(i in e)e.hasOwnProperty(i)&&(s=e[i],void 0!==t&&(s.options.optionsParent=t))}});return e}),define("Plugbot/base/Template",["handlebars","Plugbot/views/utils/UiHelpers"],function(e,t){"use strict";var i=Backbone.View.extend({options:function(){return{view:void 0}},initialize:function(){_.bindAll(this,"_getElement","_getId","_getClass"),this.rendered=!1,this.cachedElements=!1,this.precompiledHbs=void 0,this.settingsElem=void 0,this.memGetElement=_.memoize(this._getElement),this.memGetId=_.memoize(this._getId),this.memGetClass=_.memoize(this._getClass)},cacheElements:function(){var e,t=this.elements,i=this.options.view;for(e in t)t.hasOwnProperty(e)&&(i["$"+e]=i.$(t[e]));return this.cachedElements=!0,this},setSelf:function(e){return this.options.view.setElement(this.getCompiledHbs(e)),this.rendered=!0,this},setHtml:function(e){return this.options.view.$el.html(this.getCompiledHbs(e)),this.rendered=!0,this},setElementIds:function(){var e,t,i=this.options.view,s=this.elements,n=this.elementIds;for(e in n)n.hasOwnProperty(e)&&(t=n[e],null===t&&(t=s[e]),this.cachedElements?i["$"+e].data("id",t):i.$(s[e]).data("id",t))},isRendered:function(){return this.rendered},delegateEvents:function(){var t,i=this.events,s=this.elements,n=this.options.view,o=n.events||{};for(t in i)i.hasOwnProperty(t)&&(o[e.compile(t)(s)]=i[t]);return n.delegateEvents(o),this},getElement:function(e){return this.memGetElement(e)},getId:function(e){return this.memGetId(e)},getClass:function(e){return this.memGetClass(e)},getCompiledHbs:function(e){var t;return this._precompile(),this._prepareSettings(),t=_.clone(this.settingsElem),this.precompiledHbs(_.defaults(t,e))},_getElement:function(e){var i=this.elements[e];return t.getId(i)||t.getClass(i)},_getId:function(e){return t.getId(this.ids[e])},_getClass:function(e){return t.getClass(this.classes[e])},_precompile:function(){void 0===this.precompiledHbs&&(this.precompiledHbs=e.compile(this.template))},_prepareSettings:function(){var e,t,i;if(void 0===this.settingsElem){t=this.elements,i={};for(e in t)t.hasOwnProperty(e)&&(i[e]=this._getElement(e));this.settingsElem=i}}});return i}),define("Plugbot/base/Timer",[],function(){"use strict";var e=Backbone.Model.extend({defaults:function(){return{interval:"optimal",optimalHz:12,autoStart:!0,exitWhenNoCall:!1}},initialize:function(){_.bindAll(this,"fnTick"),this.enabled=!1,this.interval=void 0,this.items={},this.idInterval=void 0,this.suspendedAll=!1},start:function(){var e=this.get("interval");return _.isNumber(e)||("optimal"===e?e=Math.round(1e3/this.get("optimalHz")):"hz"===e.substr(-2)&&(e=Math.round(1e3/+e.substr(0,e.length-2)))),this.interval=e,this.idInterval=setInterval(this.fnTick,e),this.enabled=!0,this},fnTick:void 0,invoke:function(){return this.fnTick(),this},suspendAll:function(){return this.suspendedAll=!0,this},resumeAll:function(){return this.suspendedAll=!1,this},has:function(e){return void 0!==this.items[e]},setOptions:function(e,t){return this.items[e].options=t,this},setRuntime:function(e,t){return this.items[e].runtime=t,this},clear:function(){return this.items={},this},close:function(){clearInterval(this.idInterval),this.idInterval=null,this.clear()}});return e}),define("Plugbot/colls/Taskbar/ItemCollection",["Plugbot/models/Taskbar/ItemModel"],function(e){"use strict";var t=Backbone.Collection.extend({model:e,comparator:function(e,t){var i=0,s=-1,n=e.get("window").model,o=t.get("window").model,l=n.get("oldZIndex"),r=o.get("oldZIndex");return r>l?i=-s:l>r&&(i=s),i},close:function(){this.reset()}});return t}),define("Plugbot/colls/Userlist/ItemCollection",[],function(){"use strict";var e=Backbone.Collection.extend({comparator:function(e,t){var i=0,s=1,n=e.get("permission"),o=t.get("permission"),l=e.get("username"),r=t.get("username"),a=l.toLowerCase(),u=r.toLowerCase();return n>o?i=-s:o>n?i=s:u>a?i=-s:a>u?i=s:r>l?i=-s:l>r&&(i=s),i},close:function(){this.reset()}});return e}),define("Plugbot/events/FloatedWindow/Events",["Plugbot/base/Events"],function(e){"use strict";function t(e){return _.defaults(_.clone(i),e)}var i={AFTER_RENDER:"after:render",SHOW:"show",HIDE:"hide",RESIZE_START:"resize:start",RESIZE_NOW:"resize:now",RESIZE_STOP:"resize:stop",DRAG_START:"drag:start",DRAG_NOW:"drag:now",DRAG_STOP:"drag:stop",CONTROLBOX_MINIMIZE:"control-box:minimize",CONTROLBOX_MAXIMIZE:"control-box:maximize",CONTROLBOX_CLOSE:"control-box:close",MOUSE_ENTER:"mouse-enter",MOUSE_LEAVE:"mouse-leave"};return function(){_.extend(i,e)}(),{getDispatcher:t}}),define("Plugbot/events/site/Events",["Plugbot/base/Events","Plugbot/events/site/RoomSize","Plugbot/views/utils/Ui"],function(e,t,i){"use strict";function s(){return r}function n(){t.getLastRoomSize(),i.plugdj.$window.on("resize",l)}function o(){i.plugdj.$window.off("resize",l)}function l(e){var i=t.getLastRoomSize(),s=t.getCurrentRoomSize(),n=t.getRatio();r.dispatch("RESIZE",{e:e,lastRoomSize:i,currentRoomSize:s,ratio:n}),t.setLastRoomSize(s)}var r={RESIZE:"resize"};return function(){_.extend(r,e)}(),{getDispatcher:s,initDispatcher:n,removeDispatcher:o}}),define("Plugbot/events/site/RoomSize",["Plugbot/views/utils/Ui"],function(e){"use strict";function t(){return{width:l.width(),height:l.height()}}function i(){return void 0===o&&(o=t()),o}function s(){var e=t(),s=i();return{width:e.width/s.width,height:e.height/s.height}}function n(e){o=e}var o,l=e.plugdj.$room;return{getCurrentRoomSize:t,getLastRoomSize:i,getRatio:s,setLastRoomSize:n}}),define("Plugbot/events/Taskbar/ItemEvents",["Plugbot/base/Events"],function(e){"use strict";function t(e){return _.defaults(_.clone(i),e)}var i={MOUSE_ENTER:"mouse-enter",MOUSE_LEAVE:"mouse-leave"};return function(){_.extend(i,e)}(),{getDispatcher:t}}),define("Plugbot/main/Dispose",["Plugbot/Entry","Plugbot/Loader","Plugbot/events/site/Events","Plugbot/main/Settings","Plugbot/main/WindowManager","Plugbot/utils/APIBuffer"],function(e,t,i,s,n,o){"use strict";function l(){Plugbot.disposeAndClose=function(){s.clearSettings(),Plugbot.close({saveSettings:!1})},Plugbot.disposeAndReload=function(){s.clearSettings(),Plugbot.reload({saveSettings:!1})},Plugbot.close=function(e){r(e),delete window.Plugbot},Plugbot.reload=function(e){var i,s=["initDone"];e=e||{},e.removeEntryAndLoader=!1,e.removeOtherScripts=!1,r(e),i=_.pick(Plugbot,s),delete window.Plugbot,window.Plugbot={},_.defaults(Plugbot,i),t.initialize()}}function r(e){e=e||{},_.defaults(e,{saveSettings:!0,removeEntryAndLoader:!0,removeOtherScripts:!0}),e.saveSettings&&s.saveSettings({immediate:!0}),Plugbot.watcher.close(),Plugbot.ticker.close(),o.close(),i.removeDispatcher(),d(),a(e),u()}function a(t){var i;if(t.removeEntryAndLoader&&(requirejs.undef("Plugbot/Entry"),requirejs.undef("Plugbot/Loader")),t.removeOtherScripts)for(i=0;i!==e.scripts.length;i+=1)requirejs.undef(e.scripts[i])}function u(){$(document.head).children("."+e.cssClassname).remove()}function d(){n.removeTaskbar(),n.removeWindows(),n.removeEvents()}return{initialize:l}}),define("Plugbot/main/Init",["Plugbot/events/site/Events","Plugbot/main/Settings","Plugbot/main/WindowManager","Plugbot/utils/Ticker","Plugbot/utils/Watcher"],function(e,t,i,s,n){"use strict";function o(){t.readSettings(),a(),u(),e.initDispatcher(),l(),Plugbot.initDone()}function l(){r(function(){i.initTaskbar(),i.initWindows(),i.initEvents(),i.initPublicMethods()})}function r(e){var t=new n({interval:"1 hz",exitWhenNoCall:!0,exitValue:!0,exitCall:e});t.addFn(function(){return API.enabled}).invoke()}function a(){Plugbot.watcher=function(){return{_watcher:new n,add:function(e,t,i){var s=this.getId(e);this._watcher.add(s,t,i)},remove:function(e){var t=this.getId(e);this._watcher.remove(t)},clear:function(){this._watcher.clear()},getId:function(e){var t,i=Plugbot.settings.watcherIds[e];if(void 0===i)throw new Error("watcher key "+e+" not found");return t=i},close:function(){this._watcher.close()}}}()}function u(){Plugbot.ticker=function(){return{_ticker:new s,add:function(e,t,i){var s=this.getId(e);this._ticker.add(s,t,i)},remove:function(e){var t=this.getId(e);this._ticker.remove(t)},clear:function(){this._ticker.clear()},getId:function(e){var t,i=Plugbot.settings.tickerIds[e];if(void 0===i)throw new Error("ticker key "+e+" not found");return t=i},close:function(){this._ticker.close()}}}()}return{initialize:o}}),define("Plugbot/main/Settings",["Plugbot/store/LocalStorage","Plugbot/utils/Helpers","Plugbot/views/utils/Ui","Plugbot/views/utils/UiHelpers"],function(e,t,i,s){"use strict";function n(){Plugbot.settings=Plugbot.settings||{}}function o(){var i=g(),s=e.readSettings(),n=i.version,o=function(e){var i=h();return t.extendDeep(e,i),i},l=function(){var e=g();t.applyDeep(s,e),Plugbot.settings=o(e)},r=function(){Plugbot.settings=o(i)};void 0!==s.version?0===u(n,s.version,d)?l():""!==c&&1===u(c,s.version,d)?(l(),Plugbot.settings.version=n):r():r()}function l(e){e=e||{},_.defaults(e,{immediate:!1}),e.immediate?a():Plugbot.ticker.add("saveSettings",function(){a()},{interval:Plugbot.settings.tickerInterval.saveSettings})}function r(){e.clearSettings()}function a(){var i=g();t.applyDeep(Plugbot.settings,i),e.saveSettings(i)}function u(e,t,i){var s,n,o,l=0,r=e.split(i),a=t.split(i),u=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},d=function(e){var t=e;return u(e)&&(t=+e),t};for(s=0;s!==r.length&&s!==a.length;s+=1){if(n=d(r[s]),o=d(a[s]),o>n){l=1;break}if(n>o){l=-1;break}}return r.length!==a.length&&(l=a>r?1:-1),l}var d=".",c="1.0.5.pre",h=function(){return{tickerIds:{saveSettings:"save-settings",saveWindow:"save-window"},watcherIds:{playlistVisible:"playlist-visible"},tickerInterval:{defaults:1e3,APICallback:3e3,saveSettings:5e3},windows:{MainUi:{name:"MainUi",bodyClass:s.getClass(i.plugbot.mainUi),view:"Plugbot/views/MainUi/View",narrowAction:"none",title:"Plugbot",callsign:"PB",zIndex:22,resizable:!1,draggable:!0},Userlist:{name:"Userlist",bodyClass:s.getClass(i.plugbot.userlist),view:"Plugbot/views/Userlist/View",narrowAction:"callsign",title:"Userlist",callsign:"UL",zIndex:21,resizable:!0,draggable:!0,minWidth:120,maxWidth:320,minHeight:0,maxHeight:720}}}},g=function(){return{version:"1.0.12.pre",windows:{MainUi:{status:"normal",oldZIndex:22,x:70,y:85,oldX:70,oldY:85,width:"auto",height:"auto"},Userlist:{status:"minimized",oldZIndex:21,x:730,y:70,oldX:730,oldY:70,width:240,height:400}},mainUi:{autoWoot:!0,autoJoin:!1}}};return{initialize:n,readSettings:o,saveSettings:l,clearSettings:r}}),define("Plugbot/main/WindowManager",["Plugbot/events/site/Events","Plugbot/main/Settings","Plugbot/models/FloatedWindow/Model","Plugbot/models/Taskbar/Model","Plugbot/models/Taskbar/ItemModel","Plugbot/views/FloatedWindow/View","Plugbot/views/Taskbar/View","Plugbot/views/utils/Ui"],function(e,t,i,s,n,o,l,r){"use strict";function a(){var e=function(e){var t,i=Plugbot.windows,s=e?"removeClass":"addClass";Plugbot.taskbar.$el[s]("plugbot-taskbar-hidden");for(t in i)i.hasOwnProperty(t)&&i[t].$el[s]("plugbot-floated-window-hidden")};Plugbot.hide=function(){return e(!1),this},Plugbot.show=function(){return e(!0),this}}function u(){var e,t;e=new s({windows:Plugbot.settings.windows,windowTop:r.plugdj.$header.height()}),t=new l({model:e}),$(document.body).append(t.render().el),Plugbot.taskbar=t}function d(){var e,t,s,n,l=Plugbot.settings.windows;Plugbot.windows=Plugbot.windows||{};for(e in l)l.hasOwnProperty(e)&&(t=l[e],s=new i(t),n=new o({model:s}),$(document.body).append(n.render().el),Plugbot.windows[e]=n,p(n))}function c(){f()}function h(){b()}function g(){Plugbot.taskbar.close()}function m(){var e,t=Plugbot.windows;for(e in t)t.hasOwnProperty(e)&&t[e].close()}function f(){var e=r.plugdj.$playlistPanel,t=!0;Plugbot.watcher.add("playlistVisible",function(){e.is(":visible")?t&&(Plugbot.hide(),t=!1):t||(Plugbot.show(),t=!0)})}function b(){Plugbot.watcher.remove("playlistVisible")}function p(e){var t=_.clone(Backbone.Events),i=e.dispatcher;t.listenTo(i,i.AFTER_RENDER,function(){var t=e.model.get("status");"minimized"===t&&v(e,{recordOldPos:!1})}).listenTo(i,i.CONTROLBOX_MINIMIZE,function(){var t=e.model.get("status");"minimized"!==t&&v(e)}).listenTo(i,i.CONTROLBOX_MAXIMIZE,function(){var t=e.model.get("status");"minimized"===t&&w(e)})}function v(e,t){t=t||{},_.defaults(t,{recordOldPos:!0}),e.model.set("status","minimized"),e.switchResizable(!1),e.switchDraggable(!1),t.recordOldPos&&e.model.set({oldX:e.model.get("x"),oldY:e.model.get("y"),oldZIndex:e.model.get("zIndex")}),e.hide(),Plugbot.taskbar.collection.add(new n({name:e.model.get("name"),title:e.model.get("title"),window:e}))}function w(e){var t=Plugbot.taskbar.collection;e.model.set("status","normal"),e.switchResizable(!0),e.switchDraggable(!0),e.model.set({x:e.model.get("oldX"),y:e.model.get("oldY"),zIndex:e.model.get("oldZIndex")}),e.show(),t.remove(t.findWhere({name:e.model.get("name")}))}return{initPublicMethods:a,initTaskbar:u,initWindows:d,initEvents:c,removeEvents:h,removeTaskbar:g,removeWindows:m}}),define("Plugbot/models/FloatedWindow/Model",[],function(){"use strict";var e=Backbone.Model.extend({defaults:function(){return{name:void 0,bodyClass:"",tableLayout:void 0,status:"normal",view:void 0,visible:!0,narrowAction:"hidden",title:"Untitled",callsign:"AAA",zIndex:void 0,oldZIndex:void 0,resizable:!1,draggable:!1,x:0,y:0,oldX:0,oldY:0,width:"auto",height:"auto",minWidth:0,maxWidth:0,minHeight:0,maxHeight:0,minimizeBox:!1,restireBox:!1,closeBox:!1}}});return e}),define("Plugbot/models/MainUi/Model",[],function(){"use strict";var e=Backbone.Model.extend({defaults:function(){return{autoWoot:void 0,autoJoin:void 0,skipVideo:void 0}},update:function(){var e=Plugbot.settings.mainUi;this.set({autoWoot:e.autoWoot,autoJoin:e.autoJoin})}});return e}),define("Plugbot/models/Taskbar/ItemModel",[],function(){"use strict";var e=Backbone.Model.extend({defaults:function(){return{name:void 0,title:"Unnamed",window:void 0}}});return e}),define("Plugbot/models/Taskbar/Model",[],function(){"use strict";var e=Backbone.Model.extend({defaults:function(){return{windows:void 0,windowTop:0}}});return e}),define("Plugbot/models/Userlist/HeadModel",[],function(){"use strict";var e=Backbone.Model.extend({defaults:function(){return{waitListPos:void 0,waitListNum:void 0}},update:function(){this.set("waitListPos",API.getWaitListPosition()),this.set("waitListNum",API.getWaitList().length)}});return e}),define("Plugbot/models/Userlist/Model",[],function(){"use strict";var e=Backbone.Model.extend({});return e}),define("Plugbot/models/Userlist/UsersModel",[],function(){"use strict";var e=Backbone.Model.extend({defaults:function(){return{users:void 0}},update:function(){this.set("users",API.getUsers())}});return e}),define("Plugbot/store/LocalStorage",["Plugbot/store/LZString"],function(e){"use strict";function t(){var t,i,s={};try{t=localStorage.getItem(n),i=e.decompressFromUTF16(t)||"{}",s=JSON.parse(i)}catch(o){s={}}return s}function i(t){var i=_.compose(e.compressToUTF16,JSON.stringify)(t);localStorage.setItem(n,i)}function s(){localStorage.removeItem(n)}var n="PlugbotEnhanced";return{readSettings:t,saveSettings:i,clearSettings:s}}),define("Plugbot/store/LZString",[],function(){var e={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_f:String.fromCharCode,compressToBase64:function(t){if(null==t)return"";var i,s,n,o,l,r,a,u="",d=0;for(t=e.compress(t);d<2*t.length;)d%2==0?(i=t.charCodeAt(d/2)>>8,s=255&t.charCodeAt(d/2),n=d/2+1<t.length?t.charCodeAt(d/2+1)>>8:0/0):(i=255&t.charCodeAt((d-1)/2),(d+1)/2<t.length?(s=t.charCodeAt((d+1)/2)>>8,n=255&t.charCodeAt((d+1)/2)):s=n=0/0),d+=3,o=i>>2,l=(3&i)<<4|s>>4,r=(15&s)<<2|n>>6,a=63&n,isNaN(s)?r=a=64:isNaN(n)&&(a=64),u=u+e._keyStr.charAt(o)+e._keyStr.charAt(l)+e._keyStr.charAt(r)+e._keyStr.charAt(a);return u},decompressFromBase64:function(t){if(null==t)return"";var i,s,n,o,l,r,a,u,d="",c=0,h=0,g=e._f;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");h<t.length;)l=e._keyStr.indexOf(t.charAt(h++)),r=e._keyStr.indexOf(t.charAt(h++)),a=e._keyStr.indexOf(t.charAt(h++)),u=e._keyStr.indexOf(t.charAt(h++)),s=l<<2|r>>4,n=(15&r)<<4|a>>2,o=(3&a)<<6|u,c%2==0?(i=s<<8,64!=a&&(d+=g(i|n)),64!=u&&(i=o<<8)):(d+=g(i|s),64!=a&&(i=n<<8),64!=u&&(d+=g(i|o))),c+=3;return e.decompress(d)},compressToUTF16:function(t){if(null==t)return"";var i,s,n,o="",l=0,r=e._f;for(t=e.compress(t),i=0;i<t.length;i++)switch(s=t.charCodeAt(i),l++){case 0:o+=r((s>>1)+32),n=(1&s)<<14;break;case 1:o+=r(n+(s>>2)+32),n=(3&s)<<13;break;case 2:o+=r(n+(s>>3)+32),n=(7&s)<<12;break;case 3:o+=r(n+(s>>4)+32),n=(15&s)<<11;break;case 4:o+=r(n+(s>>5)+32),n=(31&s)<<10;break;case 5:o+=r(n+(s>>6)+32),n=(63&s)<<9;break;case 6:o+=r(n+(s>>7)+32),n=(127&s)<<8;break;case 7:o+=r(n+(s>>8)+32),n=(255&s)<<7;break;case 8:o+=r(n+(s>>9)+32),n=(511&s)<<6;break;case 9:o+=r(n+(s>>10)+32),n=(1023&s)<<5;break;case 10:o+=r(n+(s>>11)+32),n=(2047&s)<<4;break;case 11:o+=r(n+(s>>12)+32),n=(4095&s)<<3;break;case 12:o+=r(n+(s>>13)+32),n=(8191&s)<<2;break;case 13:o+=r(n+(s>>14)+32),n=(16383&s)<<1;break;case 14:o+=r(n+(s>>15)+32,(32767&s)+32),l=0}return o+r(n+32)},decompressFromUTF16:function(t){if(null==t)return"";for(var i,s,n="",o=0,l=0,r=e._f;l<t.length;){switch(s=t.charCodeAt(l)-32,o++){case 0:i=s<<1;break;case 1:n+=r(i|s>>14),i=(16383&s)<<2;break;case 2:n+=r(i|s>>13),i=(8191&s)<<3;break;case 3:n+=r(i|s>>12),i=(4095&s)<<4;break;case 4:n+=r(i|s>>11),i=(2047&s)<<5;break;case 5:n+=r(i|s>>10),i=(1023&s)<<6;break;case 6:n+=r(i|s>>9),i=(511&s)<<7;break;case 7:n+=r(i|s>>8),i=(255&s)<<8;break;case 8:n+=r(i|s>>7),i=(127&s)<<9;break;case 9:n+=r(i|s>>6),i=(63&s)<<10;break;case 10:n+=r(i|s>>5),i=(31&s)<<11;break;case 11:n+=r(i|s>>4),i=(15&s)<<12;break;case 12:n+=r(i|s>>3),i=(7&s)<<13;break;case 13:n+=r(i|s>>2),i=(3&s)<<14;break;case 14:n+=r(i|s>>1),i=(1&s)<<15;break;case 15:n+=r(i|s),o=0}l++}return e.decompress(n)},compress:function(t){if(null==t)return"";var i,s,n,o={},l={},r="",a="",u="",d=2,c=3,h=2,g="",m=0,f=0,b=e._f;for(n=0;n<t.length;n+=1)if(r=t.charAt(n),Object.prototype.hasOwnProperty.call(o,r)||(o[r]=c++,l[r]=!0),a=u+r,Object.prototype.hasOwnProperty.call(o,a))u=a;else{if(Object.prototype.hasOwnProperty.call(l,u)){if(u.charCodeAt(0)<256){for(i=0;h>i;i++)m<<=1,15==f?(f=0,g+=b(m),m=0):f++;for(s=u.charCodeAt(0),i=0;8>i;i++)m=m<<1|1&s,15==f?(f=0,g+=b(m),m=0):f++,s>>=1}else{for(s=1,i=0;h>i;i++)m=m<<1|s,15==f?(f=0,g+=b(m),m=0):f++,s=0;for(s=u.charCodeAt(0),i=0;16>i;i++)m=m<<1|1&s,15==f?(f=0,g+=b(m),m=0):f++,s>>=1}d--,0==d&&(d=Math.pow(2,h),h++),delete l[u]}else for(s=o[u],i=0;h>i;i++)m=m<<1|1&s,15==f?(f=0,g+=b(m),m=0):f++,s>>=1;d--,0==d&&(d=Math.pow(2,h),h++),o[a]=c++,u=String(r)}if(""!==u){if(Object.prototype.hasOwnProperty.call(l,u)){if(u.charCodeAt(0)<256){for(i=0;h>i;i++)m<<=1,15==f?(f=0,g+=b(m),m=0):f++;for(s=u.charCodeAt(0),i=0;8>i;i++)m=m<<1|1&s,15==f?(f=0,g+=b(m),m=0):f++,s>>=1}else{for(s=1,i=0;h>i;i++)m=m<<1|s,15==f?(f=0,g+=b(m),m=0):f++,s=0;for(s=u.charCodeAt(0),i=0;16>i;i++)m=m<<1|1&s,15==f?(f=0,g+=b(m),m=0):f++,s>>=1}d--,0==d&&(d=Math.pow(2,h),h++),delete l[u]}else for(s=o[u],i=0;h>i;i++)m=m<<1|1&s,15==f?(f=0,g+=b(m),m=0):f++,s>>=1;d--,0==d&&(d=Math.pow(2,h),h++)}for(s=2,i=0;h>i;i++)m=m<<1|1&s,15==f?(f=0,g+=b(m),m=0):f++,s>>=1;for(;;){if(m<<=1,15==f){g+=b(m);break}f++}return g},decompress:function(t){if(null==t)return"";if(""==t)return null;var i,s,n,o,l,r,a,u,d=[],c=4,h=4,g=3,m="",f="",b=e._f,p={string:t,val:t.charCodeAt(0),position:32768,index:1};for(s=0;3>s;s+=1)d[s]=s;for(o=0,r=Math.pow(2,2),a=1;a!=r;)l=p.val&p.position,p.position>>=1,0==p.position&&(p.position=32768,p.val=p.string.charCodeAt(p.index++)),o|=(l>0?1:0)*a,a<<=1;switch(i=o){case 0:for(o=0,r=Math.pow(2,8),a=1;a!=r;)l=p.val&p.position,p.position>>=1,0==p.position&&(p.position=32768,p.val=p.string.charCodeAt(p.index++)),o|=(l>0?1:0)*a,a<<=1;u=b(o);break;case 1:for(o=0,r=Math.pow(2,16),a=1;a!=r;)l=p.val&p.position,p.position>>=1,0==p.position&&(p.position=32768,p.val=p.string.charCodeAt(p.index++)),o|=(l>0?1:0)*a,a<<=1;u=b(o);break;case 2:return""}for(d[3]=u,n=f=u;;){if(p.index>p.string.length)return"";for(o=0,r=Math.pow(2,g),a=1;a!=r;)l=p.val&p.position,p.position>>=1,0==p.position&&(p.position=32768,p.val=p.string.charCodeAt(p.index++)),o|=(l>0?1:0)*a,a<<=1;switch(u=o){case 0:for(o=0,r=Math.pow(2,8),a=1;a!=r;)l=p.val&p.position,p.position>>=1,0==p.position&&(p.position=32768,p.val=p.string.charCodeAt(p.index++)),o|=(l>0?1:0)*a,a<<=1;d[h++]=b(o),u=h-1,c--;break;case 1:for(o=0,r=Math.pow(2,16),a=1;a!=r;)l=p.val&p.position,p.position>>=1,0==p.position&&(p.position=32768,p.val=p.string.charCodeAt(p.index++)),o|=(l>0?1:0)*a,a<<=1;d[h++]=b(o),u=h-1,c--;break;case 2:return f}if(0==c&&(c=Math.pow(2,g),g++),d[u])m=d[u];else{if(u!==h)return null;m=n+n.charAt(0)}f+=m,d[h++]=n+m.charAt(0),c--,n=m,0==c&&(c=Math.pow(2,g),g++)}}};return e}),define("Plugbot/tmpls/FloatedWindow/View",["Plugbot/base/Template"],function(e){"use strict";var t=e.extend({elements:{elHeader:".header",elTitle:".title",elControlBox:".control-box",elMinimize:".minimize",elMaximize:".maximize",elClose:".close",elBody:".body"},elementIds:{elMinimize:null,elMaximize:null,elClose:null},template:'<div class="plugbot-floated-window">    <div class="{{elHeader}}">        <h1 class="{{elTitle}}">{{textTitle}}</h1>        <div class="{{elControlBox}}">            <button class="{{elMinimize}}" title="Minimize"></button>            <button class="{{elMaximize}}" title="Restore"></button>            <button class="{{elClose}}" title="Close"></button>        </div>    </div>    <div class="{{elBody}}"></div></div>'});return t}),define("Plugbot/tmpls/MainUi/View",["Plugbot/base/Template"],function(e){"use strict";var t=e.extend({elements:{clsItems:".item",elAutoWoot:"#plugbot-btn-auto-woot",elAutoJoin:"#plugbot-btn-auto-join",elSkipVideo:"#plugbot-btn-skip-video"},elementIds:{elAutoWoot:null,elAutoJoin:null,elSkipVideo:null},ids:{},classes:{enabled:".enabled"},events:{"click {{clsItems}}":"onClickItem"},template:'<p id="{{elAutoWoot}}" class="item">auto-woot</p><p id="{{elAutoJoin}}" class="item">auto-join</p><p id="{{elSkipVideo}}" class="item">skip-video</p>'});return t}),define("Plugbot/tmpls/Taskbar/ItemView",["Plugbot/base/Template"],function(e){"use strict";var t=e.extend({elements:{},template:'<li class="task">{{title}}</li>'});return t}),define("Plugbot/tmpls/Taskbar/View",["Plugbot/base/Template"],function(e){"use strict";var t=e.extend({elements:{elContent:".content",elHandle:".handle",elContainer:".container"},template:'<div class="plugbot-taskbar">    <div class="{{elContent}}">        <ul class="{{elContainer}}"></ul>    </div>    <div class="{{elHandle}}"></div></div>'});return t}),define("Plugbot/tmpls/Userlist/HeadView",["Plugbot/base/Template"],function(e){"use strict";var t=e.extend({elements:{},template:'<h1 class="userlist-wait-list-pos">{{textWaitListPos}}</h1>'});return t}),define("Plugbot/tmpls/Userlist/UsersItemView",["Plugbot/base/Template"],function(e){"use strict";var t=e.extend({elements:{clsItem:".item"},classes:{curated:".item-curated",woot:".item-woot",meh:".item-meh",undecided:".item-undecided"},template:'<li class="{{clsItem}} {{clsVote}}" data-id="{{id}}">{{text}}</li>'});return t}),define("Plugbot/tmpls/Userlist/View",["Plugbot/base/Template"],function(e){"use strict";var t=e.extend({elements:{elHead:".head",elWrapUsers:".wrap-users",elUsers:".users",clsHead:".row-head",clsUsers:".row-users"},template:'<div class="{{clsHead}}">    <div class="{{elHead}}"></div></div><div class="{{clsUsers}}">    <div class="{{elWrapUsers}}">        <ul class="{{elUsers}}"></ul>    </div></div>'});return t}),define("Plugbot/utils/API",[],function(){"use strict";var e={VOTE:{WOOT:1,UNDECIDED:0,MEH:-1}};return{USER:e}}),define("Plugbot/utils/APIBuffer",["Plugbot/utils/Ticker"],function(e){"use strict";var t=Backbone.Model.extend({initialize:function(){this.ticker=new e},addListening:function(e,t,i,s){var n,o=this,l=function(i,s){t.listenTo(API,i,function(){o.ticker.add(e,function(){void 0!==s.fnCheck?s.fnCheck()&&s.callback():s.callback()},{interval:Plugbot.settings.tickerInterval.APICallback})})};for(s=s||{},_.defaults(s,{fnCheck:void 0,callback:void 0}),n=0;n!==i.length;n+=1)l(i[n],s)},stopListening:function(e,t){var i,s=function(t){e.stopListening(API,t)};if(void 0===t)e.stopListening(API);else for(i=0;i!==t.length;i+=1)s(t[i])},close:function(){this.ticker.close()}});return new t}),define("Plugbot/utils/Countdown",["Plugbot/base/Timer"],function(e){"use strict";var t=e.extend({defaults:function(){return{call:void 0,countdown:0}},initialize:function(){this.parent=e.prototype,this.parent.initialize.call(this),_.defaults(this.attributes,this.parent.defaults())},fnTick:function(){var e,t,i,s,n,o,l,r=this.interval;if(!this.suspendedAll){i=!0,t=this.items;for(s in t)if(t.hasOwnProperty(s)&&(i=!1,n=t[s],l=n.runtime,!l.suspended))if(o=n.options,l.elapsed+=r,l.elapsed>=o.countdown){if(void 0!==o.call)for(o.call.apply(this),e=0;e<l.waitCallbacks.length;e+=1)l.waitCallbacks[e]();this.remove(s)}else this.items[s].runtime=l;i&&this.get("exitWhenNoCall")&&this.close()}},add:function(e,t,i){return void 0!==this.items[e]?this:(i=i||{},_.defaults(i,{call:t,countdown:this.get("countdown")}),this.items[e]={options:i,runtime:{suspended:!1,elapsed:0,waitCallbacks:[]}},this.enabled||this.get("autoStart")&&this.start(),this)},remove:function(e){return void 0===this.items[e]?this:(delete this.items[e],this)},restart:function(e,t,i){void 0!==this.items[e]?this.resetElapsed(e):this.add(e,t,i)},wait:function(e,t){return this.items[e].runtime.waitCallbacks.push(t),this},suspend:function(e){return this.items[e].runtime.suspended=!0,this},resume:function(e){return this.items[e].runtime.suspended=!1,this},setCountdown:function(e,t){return this.items[e].options.countdown=t,this},callAndRemove:function(e){return this.items[e].options.call(),delete this.items[e],this},setElapsed:function(e,t){return this.items[e].runtime.elapsed=t,this},resetElapsed:function(e){return this.items[e].runtime.elapsed=0,this
},delay:function(e,t){return this.items[e].runtime.elapsed-=t,this},forward:function(e,t){return this.items[e].runtime.elapsed+=t,this}});return t}),define("Plugbot/utils/Helpers",[],function(){"use strict";function e(t,i){var s;for(s in t)t.hasOwnProperty(s)&&(i.hasOwnProperty(s)?e(t[s],i[s]):i[s]=t[s])}function t(e,i){var s,n,o;for(s in e)e.hasOwnProperty(s)&&(n=e[s],i.hasOwnProperty(s)?(o=i[s],"object"!=typeof n||"object"!=typeof o?i[s]=n:t(n,o)):i[s]=n)}function i(e,t){var s,n,o;for(s in e)e.hasOwnProperty(s)&&(n=e[s],t.hasOwnProperty(s)&&(o=t[s],"object"!=typeof n||"object"!=typeof o?t[s]=n:i(n,o)))}function s(e){return JSON.parse(JSON.stringify(e))}return{defaultsDeep:e,extendDeep:t,applyDeep:i,cloneDeep:s}}),define("Plugbot/utils/Ticker",[],function(){"use strict";var e=Backbone.Model.extend({defaults:function(){return{interval:"optimal",optimalHz:1}},initialize:function(){this.ids={}},add:function(e,t,i){var s,n,o=this;return void 0!==this.ids[e]?this:(i=i||{},_.defaults(i,{interval:this.get("interval")}),s=i.interval,_.isNumber(s)||("optimal"===s?s=Math.round(1e3/this.get("optimalHz")):"hz"===s.substr(-2)&&(s=Math.round(1e3/+s.substr(0,s.length-2)))),n=s-Date.now()%s,this.ids[e]=setTimeout(function(){t.call(o),delete o.ids[e]},n),this)},remove:function(e){return clearInterval(this.ids[e]),delete this.ids[e],this},has:function(e){return void 0!==this.ids[e]},clear:function(){var e,t=this.ids;for(e in t)t.hasOwnProperty(e)&&this.remove(e);return this},close:function(){this.clear()}});return e}),define("Plugbot/utils/Watcher",["Plugbot/base/Timer"],function(e){"use strict";var t=e.extend({defaults:function(){return{call:void 0,args:void 0,exitValue:0,exitCall:void 0,maxNumCall:0}},initialize:function(){this.parent=e.prototype,this.parent.initialize.call(this),_.defaults(this.attributes,this.parent.defaults())},fnTick:function(){var e,t,i,s,n,o,l,r;if(!this.suspendedAll){t=!0,e=this.items;for(i in e)e.hasOwnProperty(i)&&(t=!1,s=e[i],o=s.runtime,o.suspended||(n=s.options,r=0!==n.maxNumCall,l=n.call.apply(this,n.args),r&&(o.numCall+=1),l===n.exitValue||r&&o.numCall>n.maxNumCall?(n.exitCall&&n.exitCall(),this.remove(i)):this.items[i].runtime=o));t&&this.get("exitWhenNoCall")&&this.close()}},addFn:function(e){return this.add(Date.now(),e),this},add:function(e,t,i){return void 0!==this.items[e]?this:(i=i||{},_.defaults(i,{call:t,exitValue:this.get("exitValue"),exitCall:this.get("exitCall"),maxNumCall:this.get("maxNumCall")}),this.items[e]={options:i,runtime:{suspended:!1,numCall:0}},this.enabled||this.get("autoStart")&&this.start(),this)},remove:function(e){return void 0===this.items[e]?this:(delete this.items[e],this)},suspend:function(e){return this.items[e].runtime.suspended=!0,this},resume:function(e){return this.items[e].runtime.suspended=!1,this}});return t}),define("Plugbot/views/FloatedWindow/View",["Plugbot/events/FloatedWindow/Events","Plugbot/events/site/Events","Plugbot/main/Settings","Plugbot/tmpls/FloatedWindow/View","Plugbot/utils/Watcher","Plugbot/views/utils/Ui","Plugbot/views/utils/UiHelpers"],function(e,t,i,s,n,o,l){"use strict";var r=Backbone.View.extend({events:{mouseenter:"onMouseEnter",mouseleave:"onMouseLeave"},initialize:function(){_.bindAll(this,"resizeBody","resizeTableLayout","onClickControlBoxButton"),this.NarrowActions={none:0,hidden:1,callsign:2,expanded:3},this.Status={hidden:0,minimized:1,normal:2},this.minWidth=160,this.minHeight=40,this.buttonClasses=["ui-icon-minus","ui-icon-extlink","ui-icon-close"],this.nowNarrowStatus=this.NarrowActions.expanded,this.dispatcher=e.getDispatcher(),this.template=new s({view:this}),this.bodyView=void 0,this.elemControlBox=void 0,this.listenTo(this.model,"change",this.onChangeAny),this.listenTo(this.model,"change:visible",this.onChangeVisible),this.listenTo(this.model,"change:zIndex",this.onChangeZIndex),this.listenTo(this.model,"change:x change:y",this.onChangePos),this.listenTo(this.model,"change:width change:height",this.onChangeSize),this.listenTo(this.model,"change:resizable",this.onChangeResizable),this.listenTo(this.model,"change:draggable",this.onChangeDraggable),this.listenToSiteEvents()},render:function(){var e=this;return this.template.setSelf({textTitle:this.model.get("title")}).cacheElements().setElementIds(),this.renderControlBoxes(),this.hide(),this.$el.css({position:"absolute",left:this.model.get("x"),top:this.model.get("y"),width:this.model.get("width"),height:this.model.get("height"),"min-width":this.minWidth,"min-height":this.minHeight,"z-index":this.model.get("zIndex")}),this.$el.addClass("scheme-default-plugbot-floated-window"),this.$elBody.addClass(this.model.get("bodyClass")),this.bindUiEvents(),require([this.model.get("view")],function(t){e.bodyView=new t({el:e.$elBody,moduleWindow:e.model,dispatcherWindow:e.dispatcher}),e.bodyView.render(),e.afterRenderBody()}),this},renderControlBoxes:function(){var e,t;for(this.elemControlBox=t=[this.$elMinimize,this.$elMaximize,this.$elClose],e=0;e!==t.length;e+=1)t[e].button({icons:{primary:this.buttonClasses[e]},text:!1}),t[e].on("click",this.onClickControlBoxButton)},afterRenderBody:function(){this.show(),this.updateTitle(),this.resizeBody(),this.resizeTableLayout(),this.dispatcher.dispatch("AFTER_RENDER")},show:function(){this.model.set("visible",!0),this.dispatcher.dispatch("SHOW")},hide:function(){this.model.set("visible",!1),this.dispatcher.dispatch("HIDE")},resizeBody:function(){var e=this,t=function(t){l.fitElement(e.$elBody,e.$el,t,0,-e.$elHeader.outerHeight(!0))};"auto"!==this.model.get("width")&&t("width"),"auto"!==this.model.get("height")&&t("height")},resizeTableLayout:function(){var e=this.model.get("tableLayout");void 0!==e&&e.resize()},updateTitle:function(){var e,t=this.NarrowActions,i=t[this.model.get("narrowAction")],s=this.model.get("title"),n=this.model.get("callsign"),o=8;switch(this.nowNarrowStatus){case t.expanded:if(e=this._getRemainingHeaderSpace(o),0>e)switch(i){case t.none:this.$el.css("min-width",this.$el.width()-e),this.nowNarrowStatus=t.none;break;case t.hidden:this.$elTitle.hide(),this.nowNarrowStatus=t.hidden;break;case t.callsign:this.$elTitle.text("<"+n+">"),this.nowNarrowStatus=t.callsign}break;case t.none:break;case t.hidden:this.$elTitle.text(s).show(),e=this._getRemainingHeaderSpace(o),e>=0?this.nowNarrowStatus=t.expanded:this.$elTitle.hide();break;case t.callsign:this.$elTitle.text(s),e=this._getRemainingHeaderSpace(o),e>=0?this.nowNarrowStatus=t.expanded:this.$elTitle.text("<"+n+">")}},switchResizable:function(e){this.model.get("resizable")&&(e?this.$el.resizable("enable"):this.$el.resizable("disable"))},switchDraggable:function(e){this.model.get("draggable")&&(e?this.$el.draggable("enable"):(this.$el.draggable("disable"),this.$el.css("opacity",1)))},bindUiEvents:function(){var e,t,i=this;this.model.get("resizable")&&this.$el.resizable({containment:"document",handles:"n, e, s, w, se",distance:0,grid:8,minWidth:Math.max(this.minWidth,this.model.get("minWidth")),minHeight:Math.max(this.minHeight,this.model.get("minHeight")),maxWidth:this.model.get("maxWidth"),maxHeight:this.model.get("maxHeight"),start:function(s,r){e=l.iframeFix(o.plugdj.$playback),t=new n,t.addFn(i.resizeTableLayout),i.dispatcher.dispatch("RESIZE_START",{e:s,ui:r})},resize:function(e,t){i.updateTitle(),i.resizeBody(),i.dispatcher.dispatch("RESIZE_NOW",{e:e,ui:t})},stop:function(s,n){e.close(),t.close(),i.model.set({width:n.size.width,height:n.size.height}),i.dispatcher.dispatch("RESIZE_STOP",{e:s,ui:n})}}),this.model.get("draggable")&&this.$el.draggable({containment:"document",zIndex:10001,handle:".header",scroll:!0,scrollSensitivity:8,snap:"div",snapMode:"both",snapTolerance:8,cursor:"move",start:function(t,s){var n=$(this);n.css({width:n.width(),height:n.height()}).data({diffOfs:{X:s.position.left-s.offset.left,Y:s.position.top-s.offset.top}}),e=l.iframeFix(o.plugdj.$playback),i.dispatcher.dispatch("DRAG_START",{e:t,ui:s})},drag:function(e,t){var s=$(this).data("diffOfs");t.position.left-=s.X,t.position.top-=s.Y,i.dispatcher.dispatch("DRAG_NOW",{e:e,ui:t})},stop:function(t,s){e.close(),i.model.set({x:s.position.left,y:s.position.top}),i.dispatcher.dispatch("DRAG_STOP",{e:t,ui:s})}})},listenToSiteEvents:function(){var e=this,i=t.getDispatcher();this.listenTo(i,i.RESIZE,function(t){var i=t.ratio;e.model.get("visible")?(e.resizeBody(),e.model.set("x",e.model.get("x")*i.width),e.model.set("y",e.model.get("y")*i.height)):(e.model.set("oldX",e.model.get("oldX")*i.width),e.model.set("oldY",e.model.get("oldY")*i.height))})},onMouseEnter:function(){this.dispatcher.dispatch("MOUSE_ENTER")},onMouseLeave:function(){this.dispatcher.dispatch("MOUSE_LEAVE")},onChangeAny:function(){Plugbot.settings.windows[this.model.get("name")]=this.model.toJSON(),i.saveSettings()},onChangeVisible:function(){this.model.get("visible")?(this.$el.show(),this.resizeBody()):this.$el.hide()},onChangeZIndex:function(){this.$el.css("z-index",this.model.get("zIndex"))},onChangePos:function(){this.$el.css({left:this.model.get("x"),top:this.model.get("y")})},onChangeSize:function(){this.$el.css({width:this.model.get("width"),height:this.model.get("height")})},onClickControlBoxButton:function(e){var t=this,i=this.template.elements,s={cancel:!1,enabledCallback:!1,callback:function(){s.cancel||t.close()}};switch($(e.currentTarget).data("id")){case i.elMinimize:this.dispatcher.dispatch("CONTROLBOX_MINIMIZE",s);break;case i.elMaximize:this.dispatcher.dispatch("CONTROLBOX_MAXIMIZE",s);break;case i.elClose:this.dispatcher.dispatch("CONTROLBOX_CLOSE",s),!s.enabledCallback}},_getRemainingHeaderSpace:function(e){return this.$elHeader.width()-this.$elTitle.outerWidth(!0)-this.$elControlBox.outerWidth(!0)-e},close:function(){var e,t=this.elemControlBox;for(e=0;e!==t.length;e+=1)t[e].off();this.bodyView.close(),this.remove()}});return r}),define("Plugbot/views/layout/TableLayout",["Plugbot/views/utils/UiHelpers"],function(e){"use strict";var t=Backbone.View.extend({options:function(){return{display:void 0,classes:[],values:[],styles:[],grows:[]}},initialize:function(){this.clsTableLayout=".plugbot-table-layout",this.cached=!1,this.elCached=[]},render:function(){this.$el.addClass(e.getClass(this.clsTableLayout)),this.$el.children("div").addClass(this.options.display),this.resize()},resize:function(){var e,t,i,s,n,o,l,r,a,u="row"===this.options.display?"width":"height",d="row"===this.options.display?"outerWidth":"outerHeight";for(this.cached||this._cacheElements(),r=this.$el[u](),a=[],l=0,e=0;e!==this.options.classes.length;e+=1)switch(i=this.elCached[e],s=this.options.values[e],n=this.options.styles[e],o=this.options.grows[e],n){case"auto":i.css(u,"auto"),r-=i[d](!0);break;case"px":i.css(u,s+"px"),r-=i[d](!0);break;case"%":i.css(u,s+"%"),r-=i[d](!0);break;case"?":i.css(u,"auto"),l+=o,a.push(e)}if(0!==l)for(r/=l,e=0;e!==a.length;e+=1)t=a[e],i=this.elCached[t],o=this.options.grows[t],i.css(u,r*o-(i[d](!0)-i[u]())+"px")},_cacheElements:function(){var e;for(e=0;e!==this.options.classes.length;e+=1)this.elCached[e]=this.$("."+this.options.classes[e]);this.cached=!0},close:function(){}});return t}),define("Plugbot/views/MainUi/View",["handlebars","Plugbot/main/Settings","Plugbot/models/MainUi/Model","Plugbot/tmpls/MainUi/View","Plugbot/utils/API","Plugbot/utils/APIBuffer","Plugbot/utils/Watcher","Plugbot/views/utils/Ui"],function(e,t,i,s,n,o,l,r){"use strict";var a=Backbone.View.extend({options:function(){return{moduleWindow:void 0,dispatcherWindow:void 0}},initialize:function(){_.bindAll(this,"enableAutoWoot","disableAutoWoot","enableAutoJoin","disableAutoJoin","enableSkipVideo","disableSkipVideo"),this.model=new i,this.lastVolume=void 0,this.watcher=new l({interval:"1 hz"}),this.pendingUpdate=!1,this.elemDialogAsk=void 0,this.templateDialogAsk=e.compile('    <div title="Exit">    <p>Exit Plugbot Enhanced?    </p></div>'),this.template=new s({view:this}),this.listenTo(this.model,"change",this.onChangeAny),this.listenToWindow(),this.listenToAPI()},el:r.plugbot.mainUi,render:function(){return this.elemDialogAsk=$(this.templateDialogAsk()),this.template.setHtml().cacheElements().delegateEvents().setElementIds(),this.model.update(),this.onClickAutoWoot(this.model.get("autoWoot")).onClickAutoJoin(this.model.get("autoJoin")).onClickSkipVideo(this.model.get("skipVideo")),this},update:function(){var e=this.template.getClass("enabled");this.$clsItems.removeClass(e),this.model.get("autoWoot")&&this.$elAutoWoot.addClass(e),this.model.get("autoJoin")&&this.$elAutoJoin.addClass(e),this.model.get("skipVideo")&&this.$elSkipVideo.addClass(e)},listenToAPI:function(){var e=this,t=this.model.cid;o.addListening("auto-woot:"+t,this,[API.DJ_ADVANCE],{fnCheck:function(){return e.model.get("autoWoot")},callback:e.enableAutoWoot}),o.addListening("auto-join:"+t,this,[API.WAIT_LIST_UPDATE],{fnCheck:function(){return e.model.get("autoJoin")},callback:this.enableAutoJoin}),o.addListening("skip-video:"+t,this,[API.DJ_ADVANCE],{fnCheck:function(){return e.watcher.remove("skip-video"),e.model.get("skipVideo")},callback:function(){var t,i=e.lastVolume;t=100===t?99:i+1,e.disableSkipVideo(),e.watcher.add("skip-video",function(){var e,s=API.getVolume();return s===i?(API.setVolume(t),API.setVolume(i)):e=0,e})}})},listenToWindow:function(){var e=this,t=this.options.moduleWindow,i=this.options.dispatcherWindow;this.listenTo(t,"change:visible",function(t){t.get("visible")&&e.pendingUpdate&&(e.update(),e.pendindUpdate=!1)}),this.listenTo(i,i.CONTROLBOX_CLOSE,function(t){t.enabledCallback=!0,e.elemDialogAsk.dialog({modal:!0,draggable:!1,resizable:!1,buttons:{OK:function(){t.callback(),Plugbot.close(),$(this).dialog("close")},Cancel:function(){t.cancel=!0,t.callback(),$(this).dialog("close")}}})})},onChangeAny:function(e){var i,s,n=e.changedAttributes();this.options.moduleWindow.get("visible")?this.update():this.pendingUpdate=!0;for(i in n)if(n.hasOwnProperty(i))switch(s=n[i],i){case"autoWoot":Plugbot.settings.mainUi.autoWoot=s;break;case"autoJoin":Plugbot.settings.mainUi.autoJoin=s}t.saveSettings()},onClickItem:function(e){var t=$(e.currentTarget),i=this.template.elements,s=this.template.getClass("enabled"),n=!t.hasClass(s);switch(t.data("id")){case i.elAutoWoot:this.model.set("autoWoot",n),this.onClickAutoWoot(n);break;case i.elAutoJoin:this.model.set("autoJoin",n),this.onClickAutoJoin(n);break;case i.elSkipVideo:this.model.set("skipVideo",n),this.onClickSkipVideo(n)}},onClickAutoWoot:function(e){return e?this.enableAutoWoot():this.disableAutoWoot(),this},onClickAutoJoin:function(e){return e?this.enableAutoJoin():this.disableAutoJoin(),this},onClickSkipVideo:function(e){return e?this.enableSkipVideo():this.disableSkipVideo(),this},enableAutoWoot:function(){var e=API.getUser().vote,t=n.USER.VOTE.UNDECIDED,i=r.plugdj.$woot;t===e&&(i.click(),e=API.getUser().vote,t===e&&this.watcher.add("auto-woot",function(){var s;return i.click(),e=API.getUser().vote,t!==e&&(s=0),s}))},disableAutoWoot:function(){this.watcher.remove("auto-woot")},enableAutoJoin:function(){var e=API.djJoin();0!==e&&this.watcher.add("auto-join",function(){return API.djJoin()})},disableAutoJoin:function(){this.watcher.remove("auto-join")},enableSkipVideo:function(){this.watcher.remove("skip-video"),this.lastVolume=API.getVolume(),API.setVolume(0)},disableSkipVideo:function(){var e=this.lastVolume;void 0!==e&&(this.model.set("skipVideo",!1),0===API.getVolume()&&(API.setVolume(e),this.lastVolume=void 0))},close:function(){this.watcher.close(),this.remove()}});return a}),define("Plugbot/views/Taskbar/ItemView",["Plugbot/events/Taskbar/ItemEvents","Plugbot/tmpls/Taskbar/ItemView"],function(e,t){"use strict";var i=Backbone.View.extend({events:{mouseenter:"onMouseEnter",mouseleave:"onMouseLeave"},initialize:function(){this.dispatcher=e.getDispatcher(),this.template=new t({view:this})},render:function(){return this.template.setSelf({title:this.model.get("title")}),this},onMouseEnter:function(){this.dispatcher.dispatch("MOUSE_ENTER")},onMouseLeave:function(){this.dispatcher.dispatch("MOUSE_LEAVE")},close:function(){this.remove()}});return i}),define("Plugbot/views/Taskbar/View",["Plugbot/base/SubView","Plugbot/colls/Taskbar/ItemCollection","Plugbot/events/site/Events","Plugbot/tmpls/Taskbar/View","Plugbot/utils/Countdown","Plugbot/views/Taskbar/ItemView","Plugbot/views/utils/Ui","Plugbot/views/utils/UiHelpers"],function(e,t,i,s,n,o,l,r){"use strict";var a=e.extend({events:{mouseenter:"onMouseEnter",mouseleave:"onMouseLeave"},initialize:function(){_.bindAll(this,"onWindowScroll"),this.parent=e.prototype,this.parent.initialize.call(this),this.currentWindow=void 0,this.countdownSlide=new n,this.countdownTask=new n,this.template=new s({view:this}),this.collection=new t,this.listenTo(this.collection,"add",this.addOne),this.listenTo(this.collection,"remove",this.removeOne),this.bindUiEvents(),this.listenToSiteEvents()},render:function(){return this.template.setSelf().cacheElements(),this.update(),this.$el.trigger("mouseleave"),this},update:function(){var e=l.plugdj.$window,t=l.plugdj.$header,i=l.plugdj.$room;this.$el.css({top:t.height()-e.scrollTop(),height:i.height()})},addOne:function(e,t){var i=new o({model:e}),s=t.indexOf(e);this.setSubView(e.cid,i),r.insertAt(i.render().el,this.$elContainer,s),this.listenToItem(i),this.listenToWindow(e.get("window"))},removeOne:function(e){var t=e.cid,i=this.getSubView(t);this.countdownSlide.resumeAll(),this.countdownTask.resumeAll(),this.currentWindow=void 0,this.stopListeningItem(i),this.stopListeningWindow(e.get("window")),this.closeSubView(t)},showWindow:function(e){e.model.set({x:this.$el.width()+l.plugdj.$window.scrollLeft(),y:this.model.get("windowTop"),zIndex:1e4}),e.show()},hideWindow:function(e){e.hide()},expand:function(){this.$el.animate({left:0},200)},collapse:function(){this.$el.animate({left:-this.$elContent.width()},200)},bindUiEvents:function(){l.plugdj.$window.on("scroll",this.onWindowScroll)},unbindUiEvents:function(){l.plugdj.$window.off("scroll",this.onWindowScroll)},listenToSiteEvents:function(){var e=this,t=i.getDispatcher();this.listenTo(t,t.RESIZE,function(){e.update(),void 0!==e.currentWindow&&e.showWindow(e.currentWindow)})},listenToItem:function(e){var t=this,i=e.dispatcher,s=e.model.get("window"),n=e.model.cid;this.listenTo(i,i.MOUSE_ENTER,function(){t.countdownTask.remove("mouse-leave:"+n).add("mouse-enter:"+n,function(){t.currentWindow=s,t.showWindow(s)},{countdown:300})}),this.listenTo(i,i.MOUSE_LEAVE,function(){t.countdownTask.remove("mouse-enter:"+n).add("mouse-leave:"+n,function(){t.currentWindow=void 0,t.hideWindow(s)},{countdown:300})})},listenToWindow:function(e){var t=e.dispatcher,i=this.countdownSlide,s=this.countdownTask;this.listenTo(t,t.MOUSE_ENTER,function(){i.suspendAll(),s.suspendAll()}),this.listenTo(t,t.MOUSE_LEAVE,function(){i.resumeAll(),s.resumeAll()})},stopListeningItem:function(e){var t=e.dispatcher,i=e.model.cid;this.stopListening(t),this.countdownTask.remove("mouse-enter:"+i).remove("mouse-leave:"+i)},stopListeningWindow:function(e){var t=e.dispatcher;this.stopListening(t)},onWindowScroll:function(){var e=this.currentWindow;this.update(),void 0!==e&&this.showWindow(this.currentWindow)},onMouseEnter:function(){var e=this;this.countdownSlide.remove("mouse-leave").add("mouse-enter",function(){e.expand()},{countdown:100})},onMouseLeave:function(){var e=this;this.countdownSlide.remove("mouse-enter").add("mouse-leave",function(){e.collapse()},{countdown:500})},close:function(){this.collection.close(),this.unbindUiEvents(),this.closeAllSubViews(),this.remove()}});return a}),define("Plugbot/views/Userlist/HeadView",["Plugbot/models/Userlist/HeadModel","Plugbot/tmpls/Userlist/HeadView"],function(e,t){"use strict";var i=Backbone.View.extend({initialize:function(){this.model=new e,this.template=new t({view:this}),this.listenTo(this.model,"change",this.render)},renderFromParent:function(){this.model.update()},render:function(){var e=this.model.get("waitListPos");return this.template.setHtml({textWaitListPos:"Waitlist: "+(-1===e?"-":e+1)+" / "+this.model.get("waitListNum")}),this},close:function(){this.remove()}});return i}),define("Plugbot/views/Userlist/UsersItemView",["Plugbot/tmpls/Userlist/UsersItemView","Plugbot/utils/API","Plugbot/views/utils/Ui"],function(e,t,i){"use strict";var s=Backbone.View.extend({initialize:function(){this.template=new e({view:this}),this.render()},events:{click:"onClick"},render:function(){return this.template.setSelf({id:this.model.get("id"),clsVote:this.getClass(),text:this.model.get("username")}),this},getClass:function(){var e,i=this.template,s=t.USER.VOTE,n=this.model.get("curated"),o=this.model.get("vote");if(n)e=i.getClass("curated");else switch(o){case s.WOOT:e=i.getClass("woot");break;case s.MEH:e=i.getClass("meh");break;case s.UNDECIDED:e=i.getClass("undecided")}return e},onClick:function(){i.plugdj.$chatInputField.val("@"+this.model.get("username")+" ").focus()},close:function(){this.remove()}});return s}),define("Plugbot/views/Userlist/UsersView",["Plugbot/base/SubView","Plugbot/colls/Userlist/ItemCollection","Plugbot/models/Userlist/UsersModel","Plugbot/utils/Countdown","Plugbot/views/Userlist/UsersItemView","Plugbot/views/utils/Ui","Plugbot/views/utils/UiHelpers"],function(e,t,i,s,n,o,l){"use strict";var r=e.extend({initialize:function(){this.parent=e.prototype,this.parent.initialize.call(this),this.countdownError=new s,this.firstUpdateData=!0,this.model=new i,this.collection=new t,this.listenTo(this.collection,"add",this.addOne).listenTo(this.collection,"remove",this.removeOne).listenTo(this.collection,"change:vote change:curated change:username",this.changeOne)},updateData:function(){this.model.update(),this.collection.set(this.model.get("users")),this.firstUpdateData=!1},renderFromParent:function(){this.$el.hide(),this.updateData(),this.$el.show()},render:function(){this.collection.reset(),this.closeAllSubViews(),this.$el.empty(),this.firstUpdateData=!0,this.$el.hide(),this.updateData(),this.$el.show()},addOne:function(e,t){var i=this,s=t.indexOf(e),o=new n({model:e});this.setSubView(e.get("id"),o),_.defer(function(){l.insertAt(o.$el,i.$el,s)}),this.verify()},removeOne:function(e){this.closeSubView(e.get("id")),this.verify()},changeOne:function(e){var t=this.collection.indexOf(e),i=this.getSubView(e.get("id"));i.model.set({vote:e.get("vote"),curated:e.get("curated"),username:e.get("username")}),i.render(),l.replaceAt(i.$el,this.$el,t)},verify:function(){if(!this.firstUpdateData){var e,t=this,i=this.collection.models,s=this.$el.children(),n=!1,o=function(){t.render()};for(e=0;e<i.length;e+=1)if($(s[e]).text()!==i[e].get("username")){n=!0,this.countdownError.add("users-error",o,{countdown:3e4});break}n||this.countdownError.remove("users-error")}},checkValid:function(){var e=!0,t=0,i=API.getUsers();return _.each(this.$el.children(),function(s){if(e){var n=i[t];if(s=$(s),s.text()!==n.username)return e=!1,void 0;if(s.hasClass("item-woot")&&1!==n.vote)return e=!1,void 0;if(s.hasClass("item-meh")&&-1!==n.vote)return e=!1,void 0;if(s.hasClass("item-curated")&&!0!==n.curated)return e=!1,void 0;t+=1,t>i.length&&(e=!1)}}),e},close:function(){this.collection.close(),this.closeAllSubViews(),this.remove()}});return r}),define("Plugbot/views/Userlist/View",["Plugbot/base/SubView","Plugbot/models/Userlist/Model","Plugbot/tmpls/Userlist/View","Plugbot/utils/APIBuffer","Plugbot/utils/Ticker","Plugbot/views/layout/TableLayout","Plugbot/views/Userlist/HeadView","Plugbot/views/Userlist/UsersView"],function(e,t,i,s,n,o,l,r){"use strict";var a=e.extend({options:function(){return{moduleWindow:void 0,dispatcherWindow:void 0}},initialize:function(){var s;_.bindAll(this,"renderHead","renderUsers"),this.parent=e.prototype,this.parent.initialize.call(this),this.model=new t,this.renderOverElapsed=5,this.ticker=new n({interval:"optimal"}),this.pendingRenderHead=!1,this.pendingRenderUsers=!1,this.template=s=new i({view:this}),this.tableLayout=new o({el:this.$el,display:"column",classes:[s.getElement("clsHead"),s.getElement("clsUsers")],values:[0,0],styles:["auto","?"],grows:[0,1]}),this.listenToAPI()},render:function(){return this.template.setHtml().cacheElements(),this.$el.addClass("scheme-default-plugbot-userlist"),this.options.moduleWindow.set("tableLayout",this.tableLayout),this.tableLayout.render(),this.subViews({head:new l({el:this.$elHead}),users:new r({el:this.$elUsers})}).renderSub(),this.listenToWindow(),this},renderHead:function(){return this.renderSub("head"),this},renderUsers:function(){return this.renderSub("users"),this},updateListRearSpace:function(){var e=this;this.ticker.add("update-users-rear-space",function(){e.$elUsers.css("padding-bottom",.5*e.$elWrapUsers.height())})},listenToAPI:function(){var e=this,t=this.model.cid,i=function(t){var i;if(e.options.moduleWindow.get("visible"))i=API.getTimeElapsed()>=e.renderOverElapsed?!0:!1;else{switch(t){case"head":e.pendingRenderHead=!0;break;case"users":e.pendingRenderUsers=!0}i=!1}return i};s.addListening("head-"+t,this,[API.WAIT_LIST_UPDATE,API.DJ_UPDATE],{fnCheck:function(){return i("head")},callback:this.renderHead}),s.addListening("users-"+t,this,[API.VOTE_UPDATE,API.CURATE_UPDATE,API.USER_JOIN,API.USER_LEAVE],{fnCheck:function(){return i("users")},callback:this.renderUsers})},listenToWindow:function(){var e=this,t=this.options.moduleWindow,i=this.options.dispatcherWindow;this.listenTo(t,"change:visible",function(t){t.get("visible")&&(e.updateListRearSpace(),e.pendingRenderHead&&(e.renderHead(),e.pendingRenderHead=!1),e.pendingRenderUsers&&(e.renderUsers(),e.pendingRenderUsers=!1))}),this.listenTo(i,i.AFTER_RENDER,function(){e.updateListRearSpace()}).listenTo(i,i.RESIZE_NOW,function(){e.updateListRearSpace()}).listenTo(i,i.RESIZE_START,function(){e.updateListRearSpace()})},close:function(){this.ticker.close(),this.tableLayout.close(),this.closeAllSubViews(),this.remove()}});return a}),define("Plugbot/views/utils/Ui",[],function(){"use strict";function e(){var e;for(e in t)t.hasOwnProperty(e)&&(t["$"+e]=$(t[e]))}var t={window:window,document:document,header:"#header",room:"#room",playback:"#playback",playlistPanel:"#playlist-panel",chatInputField:"#chat-input-field",woot:"#woot"},i={mainUi:".plugbot-main-ui",userlist:".plugbot-userlist"};return function(){e()}(),{plugdj:t,plugbot:i}}),define("Plugbot/views/utils/UiHelpers",["Plugbot/utils/Watcher"],function(e){"use strict";function t(e){var t;return t="#"===e[0]?e.substr(1):null}function i(e){var t;return t="."===e[0]?e.substr(1):null}function s(e,t){var i;switch(t){case"width":i=e.outerWidth()-e.innerWidth();break;case"height":i=e.outerHeight()-e.innerHeight();break;case"both":i={width:e.outerWidth()-e.innerWidth(),height:e.outerHeight()-e.innerHeight()}}return i}function n(e,t){var i;switch(t){case"width":i=e.innerWidth()-e.width();break;case"height":i=e.innerWidth()-e.width();break;case"both":i={width:e.innerWidth()-e.width(),height:e.innerWidth()-e.width()}}return i}function o(e,t){var i;switch(t){case"width":i=e.outerWidth(!0)-e.outerWidth();break;case"height":i=e.outerHeight(!0)-e.outerWidth();break;case"both":i={width:e.outerWidth(!0)-e.outerWidth(),height:e.outerHeight(!0)-e.outerWidth()}}return i}function l(e,t){var i,s,o=e.children();switch(t){case"width":s=n(e,"width");break;case"height":s=n(e,"height");break;case"both":s={width:n(e,"width"),height:n(e,"height")}}for(i=0;i!==o.length;i+=1)switch(t){case"width":s+=o[i].outerWidth(!0);break;case"height":s+=o[i].outerHeight(!0);break;case"both":s.width+=o[i].outerWidth(!0),s.height+=o[i].outerHeight(!0)}return s}function r(e,t,i){var s=t.children();s.length===i?t.append(e):s.eq(i).before(e)}function a(e,t){e.children().eq(t).remove()}function u(e,t,i){t.children().eq(i).replaceWith(e)}function d(e,t,i,s,n){var o=e.outerWidth(!0)-e.width(),l=e.outerHeight(!0)-e.height();switch(s=s||0,n=n||0,i){case"width":e.width(t.width()-o+s);break;case"height":e.height(t.height()-l+n);break;case"both":e.width(t.width()-o+s),e.height(t.height()-l+n)}}function c(t){var i=t.css("pointer-events"),s=new e,n=function(e){return 0===e.length?0:(e.css("pointer-events","none"),1)};return s.add("iframe-fix",n,{args:[t]}),n(t),{close:function(){h(s,t,i)}}}function h(e,t,i){t.css("pointer-events",i),e.close()}return{getId:t,getClass:i,getBorder:s,getPadding:n,getMargin:o,getMinFloatSize:l,insertAt:r,removeAt:a,replaceAt:u,fitElement:d,iframeFix:c}});
//# sourceMappingURL=release.min.js.map